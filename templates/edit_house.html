{% extends "base.html" %} {% block content %}

<div class="container">
    <div class="page-title form-heading col-md-12">
        <h1>Edit Green Building</h1>
    </div>
    <div class="row">
        <div class="col-md-12 mb-4">
            <form action="{{url_for('update_house', house_id=houses.id)}}" method="POST" name="update_house" id="update_house">
                <div class="form-group">
                <div class="controls">
                    <i class="fas fa-align-center"></i><label class="form-field-description">Select Category</label>
                        <select class="form-control category-formfield" id="category_name" name="category_name">
                            <!-- Populate categories from database green.buildings.categories -->
                            {% for category in categories %}
                                {% if categories.category_name == houses.category_name %}
                                <option value="{{category.category_name}}" selected>{{category.category_name}}</option>
                                {% else %}
                                <option value="{{category.category_name}}">{{category.category_name}}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                <div class="form-group">
                    <div class="controls">
                        <i class="fas fa-pencil-alt"></i><label class="form-field-description">Your Name</label>
                            <input type="text" class="form-control" id="user_name" name="user_name" required data-validation-required-message="Please enter your name." value="{{houses.user_name}}" maxlength="100">
                    </div>
                </div>      
                <div class="form-group">
                    <div class="controls">
                    <i class="fas fa-pencil-alt"></i><label class="form-field-description">Green Building name</label>
                        <input type="text" class="form-control" id="house_name" name="house_name" required data-validation-required-message="Please enter your house name." value="{{houses.house_name}}" maxlength="100">
                    </div>
                </div>
                <div class="form-group">
                    <div class="controls">
                    <i class="fas fa-pencil-alt"></i><label class="form-field-description">Location</label>
                        <input type="text" class="form-control" id="location" name="location" required data-validation-required-message="Please enter your location." value="{{houses.location}}" maxlength="100">
                    </div>
                </div>
                <div class="form-group">
                    <div class="controls">
                    <i class="fas fa-pencil-alt"></i><label class="form-field-description">Year of construction</label>
                        <input type="text" class="form-control" id="year" name="year" required data-validation-required-message="Please enter the year of construction." value="{{houses.year}}" maxlength="4">
                    </div>
                </div>                      
                <div class="form-group">
                    <div class="controls">
                    <i class="far fa-images"></i><label class="form-field-description">Add your picture</label>
                        <input type="file" class="form-control" id="image" name="image" value="{{houses.image}}">
                        <button type="button" class="btn btn-suscess">Upload</button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="controls">
                    <i class="fas fa-info"></i><label class="form-field-description">Description</label>
                    <textarea class="form-control" id="description" name="description" required data-validation-required-message="Please enter a short house description." maxlength="1000" value="{{houses.description}}"></textarea>
                    </div>
                </div>
                <div>
                <h5>Click "Update" to confirm</h5>           
                <button type="submit" class="btn btn-success" onclick="alert_edit()" id="sendMessageButton">Update</button>
                <a href="{{url_for('house_detail', house_id=houses._id )}}" onclick="alert_no_edit()" class="btn btn-success">Cancel</a> 
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Alert prompts for editing or canceling edit process -->
<script>
function alert_edit(){
        alert("Thank you! The building has been updated successfully.");
    }
function alert_no_edit(){
        alert("Your building has not been edited.");
    }
</script>

{% endblock %}